{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement, prepend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */function () {\n  function VirtualScroll(parent) {\n    this.translateY = 0;\n    this.itemSize = 60;\n    this.bufferCount = 3;\n    this.renderedLength = 0;\n    this.averageRowHeight = 0;\n    this.startIndex = 0;\n    this.parent = parent;\n    this.addEventListener();\n  }\n  VirtualScroll.prototype.addEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n  };\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.virtualScroll, this.virtualScrolling);\n  };\n  VirtualScroll.prototype.getRenderedCount = function () {\n    this.setItemSize();\n    var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n    this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n    return this.renderedLength;\n  };\n  VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n    var wrap = createElement('div', {\n      className: cls.VIRTUAL_TRACK_CLASS\n    });\n    if (this.isHorizontalScroll) {\n      var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n      wrap.style.width = colCount * this.itemSize + 'px';\n    } else {\n      wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n    }\n    contentWrap.appendChild(wrap);\n  };\n  VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n    var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    if (lastRenderIndex !== lastResourceIndex) {\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      this.renderedLength = conTable.querySelector('tbody').children.length;\n      virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + 'px';\n    } else {\n      virtual.style.height = '';\n    }\n    this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n  };\n  VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n    var resourceCount = this.parent.resourceBase.renderedResources.length;\n    if (resourceCount !== this.getRenderedCount()) {\n      wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      this.translateY = 0;\n      this.setTranslate(resWrap, conWrap, eventWrap);\n    } else {\n      var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n      var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n      var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n      renderedResCount = renderedResCount > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResCount;\n      wrap.style.height = renderedResCount * this.itemSize + 'px';\n    }\n  };\n  VirtualScroll.prototype.setItemSize = function () {\n    if (this.isHorizontalScroll) {\n      this.itemSize = util.getElementWidthFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    } else {\n      this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    }\n  };\n  VirtualScroll.prototype.renderEvents = function () {\n    this.setTabIndex();\n    var dynamicData = this.triggerScrollEvent(events.virtualScrollStop);\n    if (this.parent.activeViewOptions && this.parent.activeViewOptions.enableLazyLoading && this.parent.crudModule) {\n      if (dynamicData.length > 0) {\n        this.parent.crudModule.refreshProcessedData(true, dynamicData);\n        this.parent.hideSpinner();\n        return;\n      }\n      this.parent.crudModule.refreshDataManager();\n      return;\n    }\n    if (this.parent.crudModule) {\n      this.parent.crudModule.refreshProcessedData(true);\n    }\n    if (this.parent.currentView !== 'Month') {\n      this.parent.notify(events.contentReady, {});\n    }\n    this.parent.hideSpinner();\n  };\n  VirtualScroll.prototype.virtualScrolling = function () {\n    var _this = this;\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n      this.parent.quickPopup.morePopup.hide();\n    }\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    if (this.isHorizontalScroll) {\n      this.horizontalScrolling(conWrap);\n    } else {\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      addClass([conWrap], 'e-transition');\n      this.renderedLength = resWrap.querySelector('tbody').children.length;\n      var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n      var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;\n      var resCollection = [];\n      if (conWrap.scrollTop - this.translateY < 0) {\n        resCollection = this.upScroll(conWrap, firstTDIndex);\n      } else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n        resCollection = this.downScroll(conWrap, firstTDIndex);\n      }\n      if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n        this.triggerScrollEvent(events.virtualScrollStart);\n        var selectedEle = this.parent.getSelectedCells();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n        window.clearTimeout(this.timeValue);\n        this.timeValue = window.setTimeout(function () {\n          _this.renderEvents();\n        }, 250);\n      }\n    }\n  };\n  VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n    var _this = this;\n    var resCollection = [];\n    var scrollWidth = this.bufferCount * this.itemSize;\n    if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n      resCollection = this.leftScroll(conWrap);\n    } else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n      resCollection = this.rightScroll(conWrap);\n    }\n    if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n      if (this.parent.resourceBase.expandedResources.length !== resCollection.length || this.parent.resourceBase.expandedResources[0] !== resCollection[0] || this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !== resCollection[resCollection.length - 1]) {\n        this.triggerScrollEvent(events.virtualScrollStart);\n        var colLevels = this.parent.activeView.colLevels.slice(0);\n        this.updateHorizontalContent(conWrap, resCollection);\n        setStyleAttribute(conWrap.querySelector('table'), {\n          transform: \"translateX(\" + this.translateY + \"px)\"\n        });\n        this.parent.activeView.colLevels = colLevels;\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n      }\n      window.clearTimeout(this.timeValue);\n      this.timeValue = window.setTimeout(function () {\n        _this.renderEvents();\n      }, 250);\n    }\n  };\n  VirtualScroll.prototype.triggerScrollEvent = function (action) {\n    var _this = this;\n    var dynamicData = [];\n    if (!this.parent.activeView) {\n      return dynamicData;\n    }\n    var eventArgs = {\n      startDate: this.parent.activeView.startDate(),\n      endDate: this.parent.activeView.endDate(),\n      startIndex: this.parent.resourceBase.renderedResources[0].groupIndex,\n      endIndex: this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex,\n      resourceData: this.parent.resourceBase.renderedResources.map(function (x) {\n        return x.resourceData;\n      }),\n      name: action\n    };\n    this.parent.trigger(action, eventArgs, function (args) {\n      if (action === events.virtualScrollStart) {\n        _this.parent.showSpinner();\n      } else if (action === events.virtualScrollStop && !isNullOrUndefined(args.eventData) && args.eventData.length > 0) {\n        dynamicData = args.eventData;\n      }\n    });\n    return dynamicData;\n  };\n  VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n    var index = 0;\n    index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;\n    if (this.parent.rowAutoHeight) {\n      index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;\n    }\n    index = index > 0 ? index : 0;\n    var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n    this.parent.resourceBase.renderedResources = prevSetCollection;\n    if (firstTDIndex === 0) {\n      this.translateY = conWrap.scrollTop;\n    } else {\n      var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n      height = height > 0 ? height : this.itemSize;\n      this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;\n    }\n    return prevSetCollection;\n  };\n  VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n    var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    if (lastResource === lastResourceIndex) {\n      return null;\n    }\n    var nextSetResIndex = 0;\n    nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n    if (this.parent.rowAutoHeight) {\n      nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n      nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;\n    }\n    var lastIndex = nextSetResIndex + this.renderedLength;\n    lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n    var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n    this.translateY = conWrap.scrollTop;\n    return nextSetCollection;\n  };\n  VirtualScroll.prototype.leftScroll = function (conWrap) {\n    var index = 0;\n    index = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize) - this.renderedLength;\n    index = index > 0 ? index : 0;\n    return this.getCollection(index, index + this.renderedLength);\n  };\n  VirtualScroll.prototype.rightScroll = function (conWrap) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var nextSetIndex = 0;\n    nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n    var lastIndex = nextSetIndex + this.renderedLength;\n    lastIndex = lastIndex > lastLevel.length - 1 ? lastLevel.length - 1 : lastIndex;\n    return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n  };\n  VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n    this.translateY = startIndex * this.itemSize;\n    var lastLevel = this.getResCollection(startIndex, endIndex);\n    if (this.parent.enableRtl) {\n      this.translateY = -this.translateY;\n    }\n    return lastLevel;\n  };\n  VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var resCollection = [];\n    var index = {\n      startIndex: 0,\n      endIndex: 0\n    };\n    if (this.parent.activeViewOptions.group.byDate) {\n      if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[0].date.getTime() && lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n        return this.parent.resourceBase.expandedResources;\n      }\n      resCollection = this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n      this.setRenderedDates(resCollection);\n    } else {\n      if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex && lastLevel[parseInt(endIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n        return this.parent.resourceBase.expandedResources;\n      }\n      resCollection = this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n    }\n    if (this.parent.currentView !== 'Month') {\n      this.startIndex = index.startIndex;\n      resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n    }\n    this.translateY = index.startIndex * this.itemSize;\n    return resCollection;\n  };\n  VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n      return firstItem.date.getTime() <= data.date.getTime() && data.date.getTime() <= lastItem.date.getTime();\n    });\n    this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n  VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n      return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n    });\n    this.parent.resourceBase.renderedResources = resCollection;\n    this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n  VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n    var index = 0;\n    data.filter(function (data) {\n      if (firstItem === data) {\n        colIndex.startIndex = index;\n      } else if (lastItem === data) {\n        colIndex.endIndex = index + data.colSpan;\n      }\n      index += data.colSpan;\n    });\n    if (firstItem === lastItem) {\n      colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n    }\n  };\n  VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n    var renderedLength = resWrap.querySelector('tbody').children.length;\n    if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n      this.isResourceCell = true;\n      this.parent.element.focus();\n    }\n    for (var i = 0; i < renderedLength; i++) {\n      remove(resWrap.querySelector('tbody tr'));\n      remove(conWrap.querySelector('tbody tr'));\n      remove(eventWrap.querySelector('div'));\n    }\n    this.parent.resourceBase.renderedResources = resCollection;\n    var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n    var contentRows = this.parent.activeView.getContentRows();\n    var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n    append(resourceRows, resWrap.querySelector('tbody'));\n    append(contentRows, conWrap.querySelector('tbody'));\n    append(eventRows, eventWrap);\n  };\n  VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n    this.parent.resourceBase.expandedResources = resCollection;\n    var selectedEle = this.parent.getSelectedCells();\n    this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n    var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n    for (var i = 0; i < renderedLength; i++) {\n      remove(conWrap.querySelector('tbody tr'));\n    }\n    if (this.parent.currentView === 'Month') {\n      if (this.parent.activeViewOptions.group.byDate) {\n        this.parent.activeView.colLevels[0] = resCollection;\n      } else {\n        this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n      }\n      var contentRows = this.parent.activeView.getContentRows();\n      append(contentRows, conWrap.querySelector('tbody'));\n    } else {\n      var col = [].slice.call(conWrap.querySelector('colgroup').children);\n      for (var i = 0; i < col.length; i++) {\n        remove(col[parseInt(i.toString(), 10)]);\n      }\n      this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n      var contentRows = this.parent.activeView.getContentRows();\n      var table = conWrap.querySelector('table');\n      var thead = conWrap.querySelector('thead');\n      var colGroupEle_1 = conWrap.querySelector('colgroup');\n      resCollection.forEach(function () {\n        colGroupEle_1.appendChild(createElement('col'));\n      });\n      thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n      }\n      prepend([thead], table);\n      append(contentRows, conWrap.querySelector('tbody'));\n    }\n  };\n  VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n    return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n  };\n  VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n    setStyleAttribute(resWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(conWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(eventWrap, {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    if (!isNullOrUndefined(timeIndicator)) {\n      setStyleAttribute(timeIndicator, {\n        transform: \"translateY(\" + this.translateY + \"px)\"\n      });\n    }\n  };\n  VirtualScroll.prototype.updateFocusedWorkCell = function () {\n    if (this.focusedEle) {\n      var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n      var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n      var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n      if (ele) {\n        this.parent.addSelectedClass([ele], ele, true);\n      }\n      this.focusedEle = null;\n    }\n  };\n  VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n    if (this.parent.currentView !== 'Month') {\n      var dateCol_1 = resCollection.map(function (x) {\n        return x.date;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = dateCol_1;\n      });\n    } else {\n      var dateCol_2 = resCollection.map(function (x) {\n        return x.date.getDay();\n      });\n      var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) {\n        return dateCol_2.indexOf(x.getDay()) >= 0;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = renderDates_1;\n      });\n    }\n  };\n  VirtualScroll.prototype.setTabIndex = function () {\n    var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n    if (resCells && resColWrap) {\n      resCells.forEach(function (element) {\n        if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n          element.setAttribute('tabindex', '0');\n        }\n      });\n    }\n    var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n    if (this.isResourceCell && focusResCell) {\n      focusResCell.focus();\n      this.isResourceCell = false;\n    }\n  };\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n    this.focusedEle = null;\n  };\n  return VirtualScroll;\n}();\nexport { VirtualScroll };","map":{"version":3,"names":["append","addClass","remove","isNullOrUndefined","setStyleAttribute","createElement","prepend","events","cls","util","VirtualScroll","parent","translateY","itemSize","bufferCount","renderedLength","averageRowHeight","startIndex","addEventListener","prototype","isDestroyed","on","virtualScroll","virtualScrolling","removeEventListener","off","getRenderedCount","setItemSize","containerSize","isHorizontalScroll","element","clientWidth","clientHeight","Math","ceil","renderVirtualTrack","contentWrap","wrap","className","VIRTUAL_TRACK_CLASS","colCount","activeView","colLevels","length","style","width","height","resourceBase","expandedResources","appendChild","updateVirtualScrollHeight","virtual","querySelector","lastResourceIndex","groupIndex","lastRenderIndex","renderedResources","conTable","CONTENT_TABLE_CLASS","children","offsetHeight","updateVirtualTrackHeight","resourceCount","resWrap","RESOURCE_COLUMN_WRAP_CLASS","conWrap","CONTENT_WRAP_CLASS","eventWrap","EVENT_TABLE_CLASS","setTranslate","lastCollIndex","renderedResCount","getElementWidthFromClass","WORK_CELLS_CLASS","getElementHeightFromClass","renderEvents","setTabIndex","dynamicData","triggerScrollEvent","virtualScrollStop","activeViewOptions","enableLazyLoading","crudModule","refreshProcessedData","hideSpinner","refreshDataManager","currentView","notify","contentReady","_this","quickPopup","quickPopupHide","morePopup","hide","horizontalScrolling","timeIndicator","CURRENT_TIMELINE_CLASS","firstTDIndex","parseInt","getAttribute","scrollHeight","rowAutoHeight","resCollection","scrollTop","upScroll","downScroll","virtualScrollStart","selectedEle","getSelectedCells","focusedEle","updateContent","dragAndDropModule","actionObj","action","navigationWrapper","window","clearTimeout","timeValue","setTimeout","scrollWidth","abs","scrollLeft","leftScroll","rightScroll","slice","updateHorizontalContent","transform","eventArgs","startDate","endDate","endIndex","resourceData","map","x","name","trigger","args","showSpinner","eventData","index","prevSetCollection","getBufferCollection","lastResource","nextSetResIndex","lastIndex","nextSetCollection","getCollection","lastLevel","nextSetIndex","getResCollection","enableRtl","group","byDate","toString","date","getTime","getByDateCollection","setRenderedDates","getByIdCollection","firstItem","lastItem","filter","data","setStartEndIndex","lastResourceLevel","colIndex","colSpan","document","activeElement","classList","contains","RESOURCE_CELLS_CLASS","isResourceCell","focus","i","resourceRows","getContentRows","contentRows","eventRows","getEventRows","querySelectorAll","col","call","table","thead","colGroupEle_1","forEach","eventBase","createEventWrapper","timeScale","enable","updateFocusedWorkCell","ele","addSelectedClass","dateCol_1","renderDates","dateCol_2","getDay","renderDates_1","indexOf","resColWrap","resCells","getBoundingClientRect","top","setAttribute","focusResCell","destroy"],"sources":["C:/Users/crist/Desktop/Proyecto-Actualizado/Proyecto-Clinica-Dental-Jose/donto-react/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/virtual-scroll.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement, prepend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.startIndex = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n        this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n        return this.renderedLength;\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        if (this.isHorizontalScroll) {\n            var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n            wrap.style.width = (colCount * this.itemSize) + 'px';\n        }\n        else {\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        }\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResCount = (renderedResCount > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResCount;\n            wrap.style.height = (renderedResCount * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        if (this.isHorizontalScroll) {\n            this.itemSize = util.getElementWidthFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n        }\n        else {\n            this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n        }\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.setTabIndex();\n        var dynamicData = this.triggerScrollEvent(events.virtualScrollStop);\n        if (this.parent.activeViewOptions && this.parent.activeViewOptions.enableLazyLoading && this.parent.crudModule) {\n            if (dynamicData.length > 0) {\n                this.parent.crudModule.refreshProcessedData(true, dynamicData);\n                this.parent.hideSpinner();\n                return;\n            }\n            this.parent.crudModule.refreshDataManager();\n            return;\n        }\n        if (this.parent.crudModule) {\n            this.parent.crudModule.refreshProcessedData(true);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.parent.notify(events.contentReady, {});\n        }\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.isHorizontalScroll) {\n            this.horizontalScrolling(conWrap);\n        }\n        else {\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            addClass([conWrap], 'e-transition');\n            this.renderedLength = resWrap.querySelector('tbody').children.length;\n            var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n            var scrollHeight = this.parent.rowAutoHeight ?\n                (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n            var resCollection = [];\n            if ((conWrap.scrollTop) - this.translateY < 0) {\n                resCollection = this.upScroll(conWrap, firstTDIndex);\n            }\n            else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n                resCollection = this.downScroll(conWrap, firstTDIndex);\n            }\n            if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n                this.triggerScrollEvent(events.virtualScrollStart);\n                var selectedEle = this.parent.getSelectedCells();\n                this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n                this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n                this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n                window.clearTimeout(this.timeValue);\n                this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n            }\n        }\n    };\n    VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n        var _this = this;\n        var resCollection = [];\n        var scrollWidth = this.bufferCount * this.itemSize;\n        if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n            resCollection = this.leftScroll(conWrap);\n        }\n        else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n            resCollection = this.rightScroll(conWrap);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            if (this.parent.resourceBase.expandedResources.length !== resCollection.length ||\n                this.parent.resourceBase.expandedResources[0] !== resCollection[0] ||\n                this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !==\n                    resCollection[resCollection.length - 1]) {\n                this.triggerScrollEvent(events.virtualScrollStart);\n                var colLevels = this.parent.activeView.colLevels.slice(0);\n                this.updateHorizontalContent(conWrap, resCollection);\n                setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateX(\" + this.translateY + \"px)\" });\n                this.parent.activeView.colLevels = colLevels;\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.triggerScrollEvent = function (action) {\n        var _this = this;\n        var dynamicData = [];\n        if (!this.parent.activeView) {\n            return dynamicData;\n        }\n        var eventArgs = {\n            startDate: this.parent.activeView.startDate(),\n            endDate: this.parent.activeView.endDate(),\n            startIndex: this.parent.resourceBase.renderedResources[0].groupIndex,\n            endIndex: this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex,\n            resourceData: this.parent.resourceBase.renderedResources.map(function (x) { return x.resourceData; }),\n            name: action\n        };\n        this.parent.trigger(action, eventArgs, function (args) {\n            if (action === events.virtualScrollStart) {\n                _this.parent.showSpinner();\n            }\n            else if (action === events.virtualScrollStop && !isNullOrUndefined(args.eventData) && args.eventData.length > 0) {\n                dynamicData = args.eventData;\n            }\n        });\n        return dynamicData;\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            height = (height > 0) ? height : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.leftScroll = function (conWrap) {\n        var index = 0;\n        index = (~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize)) - this.renderedLength;\n        index = (index > 0) ? index : 0;\n        return this.getCollection(index, index + this.renderedLength);\n    };\n    VirtualScroll.prototype.rightScroll = function (conWrap) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var nextSetIndex = 0;\n        nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n        var lastIndex = nextSetIndex + this.renderedLength;\n        lastIndex = (lastIndex > lastLevel.length - 1) ? lastLevel.length - 1 : lastIndex;\n        return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n    };\n    VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n        this.translateY = startIndex * this.itemSize;\n        var lastLevel = this.getResCollection(startIndex, endIndex);\n        if (this.parent.enableRtl) {\n            this.translateY = -this.translateY;\n        }\n        return lastLevel;\n    };\n    VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var resCollection = [];\n        var index = { startIndex: 0, endIndex: 0 };\n        if (this.parent.activeViewOptions.group.byDate) {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() ===\n                this.parent.resourceBase.expandedResources[0].date.getTime() &&\n                lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n            this.setRenderedDates(resCollection);\n        }\n        else {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex &&\n                lastLevel[parseInt(endIndex.toString(), 10)].groupIndex ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.startIndex = index.startIndex;\n            resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n        }\n        this.translateY = index.startIndex * this.itemSize;\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n            return firstItem.date.getTime() <= data.date.getTime() &&\n                data.date.getTime() <= lastItem.date.getTime();\n        });\n        this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n            return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n        });\n        this.parent.resourceBase.renderedResources = resCollection;\n        this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n        var index = 0;\n        data.filter(function (data) {\n            if (firstItem === data) {\n                colIndex.startIndex = index;\n            }\n            else if (lastItem === data) {\n                colIndex.endIndex = index + data.colSpan;\n            }\n            index += data.colSpan;\n        });\n        if (firstItem === lastItem) {\n            colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n        }\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLength = resWrap.querySelector('tbody').children.length;\n        if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n            this.isResourceCell = true;\n            this.parent.element.focus();\n        }\n        for (var i = 0; i < renderedLength; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n        this.parent.resourceBase.expandedResources = resCollection;\n        var selectedEle = this.parent.getSelectedCells();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n        for (var i = 0; i < renderedLength; i++) {\n            remove(conWrap.querySelector('tbody tr'));\n        }\n        if (this.parent.currentView === 'Month') {\n            if (this.parent.activeViewOptions.group.byDate) {\n                this.parent.activeView.colLevels[0] = resCollection;\n            }\n            else {\n                this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n            }\n            var contentRows = this.parent.activeView.getContentRows();\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n        else {\n            var col = [].slice.call(conWrap.querySelector('colgroup').children);\n            for (var i = 0; i < col.length; i++) {\n                remove(col[parseInt(i.toString(), 10)]);\n            }\n            this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n            var contentRows = this.parent.activeView.getContentRows();\n            var table = conWrap.querySelector('table');\n            var thead = conWrap.querySelector('thead');\n            var colGroupEle_1 = conWrap.querySelector('colgroup');\n            resCollection.forEach(function () {\n                colGroupEle_1.appendChild(createElement('col'));\n            });\n            thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n            }\n            prepend([thead], table);\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(eventWrap, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        }\n    };\n    VirtualScroll.prototype.updateFocusedWorkCell = function () {\n        if (this.focusedEle) {\n            var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n            var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n            var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n            if (ele) {\n                this.parent.addSelectedClass([ele], ele, true);\n            }\n            this.focusedEle = null;\n        }\n    };\n    VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n        if (this.parent.currentView !== 'Month') {\n            var dateCol_1 = resCollection.map(function (x) { return x.date; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = dateCol_1; });\n        }\n        else {\n            var dateCol_2 = resCollection.map(function (x) { return x.date.getDay(); });\n            var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) { return dateCol_2.indexOf(x.getDay()) >= 0; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = renderDates_1; });\n        }\n    };\n    VirtualScroll.prototype.setTabIndex = function () {\n        var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n        if (resCells && resColWrap) {\n            resCells.forEach(function (element) {\n                if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n                    element.setAttribute('tabindex', '0');\n                }\n            });\n        }\n        var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n        if (this.isResourceCell && focusResCell) {\n            focusResCell.focus();\n            this.isResourceCell = false;\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n        this.focusedEle = null;\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}