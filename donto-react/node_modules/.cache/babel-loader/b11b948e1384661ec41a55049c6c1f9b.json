{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nimport { EventHandler, Browser, select, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { debounce, Touch } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nvar VirtualScroll = /** @class */function () {\n  function VirtualScroll(parent) {\n    var _this = this;\n    this.sentinelInfo = {\n      'up': {\n        check: function (rect, info) {\n          var top = rect.top - _this.containerElementRect.top;\n          info.entered = top >= 0;\n          return top + _this.parent.listItemHeight * _this.parent.virtualItemCount / 2 >= 0;\n        },\n        axis: 'Y'\n      },\n      'down': {\n        check: function (rect, info) {\n          var cHeight = _this.parent.popupContentElement.clientHeight;\n          var top = rect.bottom;\n          info.entered = rect.bottom <= _this.containerElementRect.bottom;\n          return top - _this.parent.listItemHeight * _this.parent.virtualItemCount / 2 <= _this.parent.listItemHeight * _this.parent.virtualItemCount / 2;\n        },\n        axis: 'Y'\n      }\n    };\n    this.parent = parent;\n    this.removeEventListener();\n    this.addEventListener();\n  }\n  VirtualScroll.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on('observe', this.observe, this);\n    this.parent.on('setGeneratedData', this.setGeneratedData, this);\n    this.parent.on('dataProcessAsync', this.dataProcessAsync, this);\n    this.parent.on('setCurrentViewDataAsync', this.setCurrentViewDataAsync, this);\n    this.parent.on('bindScrollEvent', this.bindScrollEvent, this);\n  };\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off('observe', this.observe);\n    this.parent.off('setGeneratedData', this.setGeneratedData);\n    this.parent.off('dataProcessAsync', this.dataProcessAsync);\n    this.parent.off('setCurrentViewDataAsync', this.setCurrentViewDataAsync);\n    this.parent.off('bindScrollEvent', this.bindScrollEvent);\n  };\n  VirtualScroll.prototype.bindScrollEvent = function (component) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.component = component.component;\n    this.observe(function (scrollArgs) {\n      return _this.scrollListener(scrollArgs);\n    });\n  };\n  VirtualScroll.prototype.observe = function (callback) {\n    this.containerElementRect = this.parent.popupContentElement.getBoundingClientRect();\n    EventHandler.add(this.parent.popupContentElement, 'wheel mousedown', this.popupScrollHandler, this);\n    this.touchModule = new Touch(this.parent.popupContentElement, {\n      scroll: this.popupScrollHandler.bind(this)\n    });\n    EventHandler.add(this.parent.popupContentElement, 'scroll', this.virtualScrollHandler(callback), this);\n  };\n  VirtualScroll.prototype.getModuleName = function () {\n    return 'VirtualScroll';\n  };\n  VirtualScroll.prototype.popupScrollHandler = function (e) {\n    this.parent.isMouseScrollAction = true;\n    this.parent.isPreventScrollAction = false;\n  };\n  VirtualScroll.prototype.getPageQuery = function (query, virtualStartIndex, virtualEndIndex) {\n    if (virtualEndIndex !== 0 && !this.parent.allowFiltering && this.component !== 'autocomplete') {\n      query = query.skip(virtualStartIndex);\n    }\n    return query;\n  };\n  VirtualScroll.prototype.setGeneratedData = function (qStartIndex, recentlyGeneratedData) {\n    var loopIteration = 0;\n    var endIndex = this.parent.listData.length + this.parent.virtualItemStartIndex;\n    for (var i = this.parent.virtualItemStartIndex; i < endIndex; i++) {\n      var alreadyAddedData = this.parent.generatedDataObject[i];\n      if (!alreadyAddedData) {\n        if (recentlyGeneratedData !== null && this.parent.listData.slice(loopIteration, loopIteration + 1).length > 0) {\n          var slicedData = this.parent.listData.slice(loopIteration, loopIteration + 1);\n          if (slicedData.length > 0) {\n            // Safely assign slicedData to this.parent.generatedDataObject[i]\n            this.parent.generatedDataObject[i] = slicedData;\n          }\n        }\n      }\n      loopIteration++;\n    }\n  };\n  VirtualScroll.prototype.generateAndExecuteQueryAsync = function (query, virtualItemStartIndex, virtualItemEndIndex, isQueryGenerated) {\n    if (virtualItemStartIndex === void 0) {\n      virtualItemStartIndex = 0;\n    }\n    if (virtualItemEndIndex === void 0) {\n      virtualItemEndIndex = 0;\n    }\n    if (isQueryGenerated === void 0) {\n      isQueryGenerated = false;\n    }\n    var dataSource = this.parent.dataSource;\n    if (!isQueryGenerated) {\n      query = this.getPageQuery(query, virtualItemStartIndex, virtualItemEndIndex);\n    }\n    this.parent.resetList(dataSource, this.parent.fields, query);\n  };\n  VirtualScroll.prototype.setCurrentViewDataAsync = function () {\n    // eslint-disable-next-line\n    var currentData = [];\n    for (var i = this.parent.viewPortInfo.startIndex; i < this.parent.viewPortInfo.endIndex; i++) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var alreadyAddedData = this.parent.generatedDataObject[i];\n      if (alreadyAddedData) {\n        currentData.push(alreadyAddedData[0]);\n      }\n    }\n    this.parent.renderItems(currentData, this.parent.fields);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var virtualTrackElement = this.parent.list.getElementsByClassName('e-virtual-ddl')[0];\n    if (virtualTrackElement) {\n      virtualTrackElement.style = this.parent.GetVirtualTrackHeight();\n    }\n    this.parent.UpdateSkeleton();\n    this.parent.liCollections = this.parent.list.querySelectorAll('.e-list-item');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var virtualContentElement = this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0];\n    if (virtualContentElement) {\n      virtualContentElement.style = this.parent.getTransformValues();\n    }\n  };\n  VirtualScroll.prototype.generateQueryAndSetQueryIndexAsync = function (query, isPopupOpen) {\n    var isStartIndexInitialised = false;\n    var queryStartIndex = 0;\n    var queryEndIndex = 0;\n    var sortedDataStartIndex = 0;\n    var vEndIndex = this.parent && this.parent.viewPortInfo.endIndex !== 0 ? this.parent.viewPortInfo.endIndex : sortedDataStartIndex + this.parent.getItems().length;\n    if (!isPopupOpen && vEndIndex !== 0) {\n      for (var i = this.parent.viewPortInfo.startIndex; i <= vEndIndex; i++) {\n        if (!(i in this.parent.generatedDataObject)) {\n          if (!isStartIndexInitialised) {\n            isStartIndexInitialised = true;\n            queryStartIndex = queryEndIndex = i;\n          } else {\n            queryEndIndex = i === vEndIndex ? i : i + 1;\n          }\n        }\n      }\n    }\n    if (isStartIndexInitialised && !(this.parent.totalItemCount == queryStartIndex && this.parent.totalItemCount == queryEndIndex)) {\n      this.parent.virtualItemStartIndex = queryStartIndex;\n      this.parent.virtualItemEndIndex = queryEndIndex;\n      this.generateAndExecuteQueryAsync(query, queryStartIndex, queryEndIndex);\n    }\n    this.setCurrentViewDataAsync();\n  };\n  VirtualScroll.prototype.dataProcessAsync = function (isOpenPopup) {\n    this.parent.selectedValueInfo = null;\n    this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\n    this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\n    this.generateQueryAndSetQueryIndexAsync(new Query(), isOpenPopup);\n  };\n  VirtualScroll.prototype.virtualScrollRefreshAsync = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.parent.isCustomFilter = !(this.parent.isTyped || this.component === 'combobox' && this.parent.allowFiltering && this.parent.queryString != this.parent.typedString || !isNullOrUndefined(this.parent.filterInput) && !isNullOrUndefined(this.parent.filterInput.value) && this.parent.filterInput.value !== '' && this.component !== 'combobox') && !(this.component === 'autocomplete' && this.parent.value != null) || this.parent.isCustomFilter;\n            if (this.parent.allowFiltering || this.component === 'autocomplete') {\n              if (!isNullOrUndefined(this.parent.typedString) && !(this.component === 'combobox' && !isNullOrUndefined(this.parent.typedString) && this.parent.allowFiltering)) {\n                if (this.parent.viewPortInfo.endIndex >= this.parent.dataCount) {\n                  this.parent.viewPortInfo.endIndex = this.parent.dataCount;\n                }\n                if (this.parent.viewPortInfo.startIndex >= this.parent.dataCount) {\n                  this.parent.viewPortInfo.startIndex = this.parent.dataCount - this.parent.itemCount;\n                }\n              } else {\n                this.parent.getSkeletonCount(true);\n              }\n            }\n            return [4 /*yield*/, this.dataProcessAsync()];\n          case 1:\n            _a.sent();\n            if (this.parent.keyboardEvent != null) {\n              this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent, this.parent.pageCount);\n            }\n            this.parent.isCustomFilter = false;\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  VirtualScroll.prototype.scrollListener = function (scrollArgs) {\n    var _this = this;\n    if (!this.parent.isPreventScrollAction) {\n      var info = scrollArgs.sentinel;\n      var pStartIndex = this.parent.previousStartIndex;\n      this.parent.viewPortInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset, false);\n      this.parent.isUpwardScrolling = false;\n      if (this.parent.previousStartIndex !== pStartIndex && !this.parent.isKeyBoardAction) {\n        this.parent.isScrollActionTriggered = false;\n        this.parent.currentPageNumber = this.parent.viewPortInfo.currentPageNumber;\n        this.parent.virtualListInfo = __assign({}, this.parent.viewPortInfo);\n        this.parent.isPreventKeyAction = true;\n        this.parent.isVirtualScrolling = true;\n        setTimeout(function () {\n          _this.parent.pageCount = _this.parent.getPageCount();\n          _this.virtualScrollRefreshAsync().then(function () {\n            if (_this.parent.popupObj) {\n              _this.parent.list = _this.parent.popupObj.element.querySelector('.' + 'e-content') || select('.' + 'e-content');\n              _this.parent.updateSelectionList();\n              _this.parent.liCollections = _this.parent.getItems();\n            }\n            _this.parent.isKeyBoardAction = false;\n            _this.parent.isVirtualScrolling = false;\n            _this.parent.isPreventKeyAction = false;\n          });\n        }, 5);\n      } else if (this.parent.isScrollActionTriggered) {\n        this.parent.isPreventKeyAction = false;\n        this.parent.isScrollActionTriggered = false;\n        var virtualListCount = this.parent.list.querySelectorAll('.e-virtual-list').length;\n        var listElement = this.parent.list.querySelector('.' + 'e-list-item');\n        var translateY = scrollArgs.offset.top - listElement.offsetHeight * virtualListCount;\n        this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0].style.transform = \"translate(0px,\" + translateY + \"px)\";\n      }\n      this.parent.previousInfo = this.parent.viewPortInfo;\n    }\n  };\n  VirtualScroll.prototype.getPageCount = function (popupElement, returnExactCount) {\n    if (returnExactCount === void 0) {\n      returnExactCount = false;\n    }\n    var list = popupElement && popupElement.querySelector('.e-content');\n    if (list) {\n      var liHeight = list.classList.contains('e-nodata') ? null : getComputedStyle(list.querySelectorAll('.e-list-item')[0], null).getPropertyValue('height');\n      var pageCount = list.getBoundingClientRect().height / parseInt(liHeight, 10);\n      return returnExactCount ? pageCount : Math.round(pageCount);\n    }\n    return 0;\n  };\n  ;\n  VirtualScroll.prototype.getRowHeight = function () {\n    return isNullOrUndefined(this.parent.liCollections) || this.parent.liCollections.length == 0 ? 0 : Math.ceil(this.parent.liCollections[0].getBoundingClientRect().height);\n  };\n  VirtualScroll.prototype.getInfoFromView = function (direction, info, e, isscrollAction) {\n    var infoType = {\n      direction: direction,\n      sentinelInfo: info,\n      offsets: e,\n      startIndex: this.parent.previousStartIndex,\n      endIndex: this.parent.previousEndIndex\n    };\n    var vHeight = this.parent.popupContentElement.getBoundingClientRect().height;\n    //Row Start and End Index calculation\n    var rowHeight = this.parent.listItemHeight;\n    var exactTopIndex = e.top / rowHeight;\n    var infoViewIndices = vHeight / rowHeight;\n    var exactEndIndex = exactTopIndex + infoViewIndices;\n    var pageSizeBy4 = this.parent.virtualItemCount / 4;\n    var totalItemCount = this.parent.totalItemCount;\n    if (infoType.direction === 'down') {\n      var sIndex = Math.round(exactEndIndex) - Math.round(pageSizeBy4);\n      if (isNullOrUndefined(infoType.startIndex) || exactEndIndex > infoType.startIndex + Math.round(this.parent.virtualItemCount / 2 + pageSizeBy4) && infoType.endIndex !== totalItemCount) {\n        infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\n        infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\n        var eIndex = infoType.startIndex + this.parent.virtualItemCount;\n        infoType.startIndex = eIndex < exactEndIndex ? Math.ceil(exactEndIndex) - this.parent.virtualItemCount : infoType.startIndex;\n        infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n        infoType.startIndex = eIndex >= totalItemCount ? infoType.endIndex - this.parent.virtualItemCount > 0 ? infoType.endIndex - this.parent.virtualItemCount : 0 : infoType.startIndex;\n        infoType.currentPageNumber = Math.ceil(infoType.endIndex / this.parent.virtualItemCount);\n      }\n    } else if (infoType.direction === 'up') {\n      if (infoType.startIndex && infoType.endIndex) {\n        var loadAtIndex = Math.round((infoType.startIndex * rowHeight + pageSizeBy4 * rowHeight) / rowHeight);\n        if (exactTopIndex < loadAtIndex) {\n          var idxAddedToExactTop = pageSizeBy4 > infoViewIndices ? pageSizeBy4 : infoViewIndices + infoViewIndices / 4;\n          var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\n          infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n          var sIndex = infoType.endIndex - this.parent.virtualItemCount;\n          infoType.startIndex = sIndex > 0 ? sIndex : 0;\n          infoType.endIndex = sIndex < 0 ? this.parent.virtualItemCount : infoType.endIndex;\n          infoType.currentPageNumber = Math.ceil(infoType.startIndex / this.parent.virtualItemCount);\n        }\n      }\n    }\n    if (!isscrollAction) {\n      this.parent.previousStartIndex = infoType.startIndex;\n      this.parent.startIndex = infoType.startIndex;\n      this.parent.previousEndIndex = infoType.endIndex;\n    } else {\n      this.parent.scrollPreStartIndex = infoType.startIndex;\n    }\n    return infoType;\n  };\n  VirtualScroll.prototype.virtualScrollHandler = function (callback) {\n    var _this = this;\n    var delay = Browser.info.name === 'chrome' ? 200 : 100;\n    var prevTop = 0;\n    var debounced100 = debounce(callback, delay);\n    var debounced50 = debounce(callback, 50);\n    return function (e) {\n      var top = e.target.scrollTop;\n      var left = e.target.scrollLeft;\n      var direction = prevTop < top && !_this.parent.isUpwardScrolling ? 'down' : 'up';\n      prevTop = top;\n      var current = _this.sentinelInfo[direction];\n      var pstartIndex = _this.parent.scrollPreStartIndex;\n      var scrollOffsetargs = {\n        top: top,\n        left: left\n      };\n      if (_this.parent.list.querySelectorAll('.e-virtual-list').length > 0) {\n        var infoview = _this.getInfoFromView(direction, current, scrollOffsetargs, true);\n        if (_this.parent.scrollPreStartIndex != pstartIndex && !_this.parent.isPreventScrollAction) {\n          _this.parent.isScrollActionTriggered = true;\n          var virtualPoup = _this.parent.list.querySelector('.e-virtual-ddl-content');\n          virtualPoup.style.transform = \"translate(0px,\" + top + \"px)\";\n        }\n      }\n      var debounceFunction = debounced100;\n      if (current.axis === 'X') {\n        debounceFunction = debounced50;\n      }\n      debounceFunction({\n        direction: direction,\n        sentinel: current,\n        offset: {\n          top: top,\n          left: left\n        },\n        focusElement: document.activeElement\n      });\n    };\n  };\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  return VirtualScroll;\n}();\nexport { VirtualScroll };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","EventHandler","Browser","select","isNullOrUndefined","debounce","Touch","Query","VirtualScroll","parent","_this","sentinelInfo","check","rect","info","top","containerElementRect","entered","listItemHeight","virtualItemCount","axis","cHeight","popupContentElement","clientHeight","bottom","removeEventListener","addEventListener","isDestroyed","on","observe","setGeneratedData","dataProcessAsync","setCurrentViewDataAsync","bindScrollEvent","off","component","scrollArgs","scrollListener","callback","getBoundingClientRect","add","popupScrollHandler","touchModule","scroll","bind","virtualScrollHandler","getModuleName","isMouseScrollAction","isPreventScrollAction","getPageQuery","query","virtualStartIndex","virtualEndIndex","allowFiltering","skip","qStartIndex","recentlyGeneratedData","loopIteration","endIndex","listData","virtualItemStartIndex","alreadyAddedData","generatedDataObject","slice","slicedData","generateAndExecuteQueryAsync","virtualItemEndIndex","isQueryGenerated","dataSource","resetList","fields","currentData","viewPortInfo","startIndex","renderItems","virtualTrackElement","list","getElementsByClassName","style","GetVirtualTrackHeight","UpdateSkeleton","liCollections","querySelectorAll","virtualContentElement","getTransformValues","generateQueryAndSetQueryIndexAsync","isPopupOpen","isStartIndexInitialised","queryStartIndex","queryEndIndex","sortedDataStartIndex","vEndIndex","getItems","totalItemCount","isOpenPopup","selectedValueInfo","virtualScrollRefreshAsync","_a","isCustomFilter","isTyped","queryString","typedString","filterInput","dataCount","itemCount","getSkeletonCount","keyboardEvent","handleVirtualKeyboardActions","pageCount","sentinel","pStartIndex","previousStartIndex","getInfoFromView","direction","offset","isUpwardScrolling","isKeyBoardAction","isScrollActionTriggered","currentPageNumber","virtualListInfo","isPreventKeyAction","isVirtualScrolling","setTimeout","getPageCount","popupObj","element","querySelector","updateSelectionList","virtualListCount","listElement","translateY","offsetHeight","transform","previousInfo","popupElement","returnExactCount","liHeight","classList","contains","getComputedStyle","getPropertyValue","height","parseInt","Math","round","getRowHeight","ceil","isscrollAction","infoType","offsets","previousEndIndex","vHeight","rowHeight","exactTopIndex","infoViewIndices","exactEndIndex","pageSizeBy4","sIndex","floor","eIndex","loadAtIndex","idxAddedToExactTop","scrollPreStartIndex","delay","name","prevTop","debounced100","debounced50","target","scrollTop","left","scrollLeft","current","pstartIndex","scrollOffsetargs","infoview","virtualPoup","debounceFunction","focusElement","document","activeElement","destroy"],"sources":["C:/Users/User/Desktop/ClinicaDentalVersionFinal/Proyecto-Clinica-Dental/donto-react/node_modules/@syncfusion/ej2-dropdowns/src/common/virtual-scroll.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { EventHandler, Browser, select, isNullOrUndefined } from '@syncfusion/ej2-base';\r\nimport { debounce, Touch } from '@syncfusion/ej2-base';\r\nimport { Query } from '@syncfusion/ej2-data';\r\nvar VirtualScroll = /** @class */ (function () {\r\n    function VirtualScroll(parent) {\r\n        var _this = this;\r\n        this.sentinelInfo = {\r\n            'up': {\r\n                check: function (rect, info) {\r\n                    var top = rect.top - _this.containerElementRect.top;\r\n                    info.entered = top >= 0;\r\n                    return top + (_this.parent.listItemHeight * _this.parent.virtualItemCount / 2) >= 0;\r\n                },\r\n                axis: 'Y'\r\n            },\r\n            'down': {\r\n                check: function (rect, info) {\r\n                    var cHeight = _this.parent.popupContentElement.clientHeight;\r\n                    var top = rect.bottom;\r\n                    info.entered = rect.bottom <= _this.containerElementRect.bottom;\r\n                    return top - (_this.parent.listItemHeight * _this.parent.virtualItemCount / 2) <= _this.parent.listItemHeight * _this.parent.virtualItemCount / 2;\r\n                }, axis: 'Y'\r\n            }\r\n        };\r\n        this.parent = parent;\r\n        this.removeEventListener();\r\n        this.addEventListener();\r\n    }\r\n    VirtualScroll.prototype.addEventListener = function () {\r\n        if (this.parent.isDestroyed) {\r\n            return;\r\n        }\r\n        this.parent.on('observe', this.observe, this);\r\n        this.parent.on('setGeneratedData', this.setGeneratedData, this);\r\n        this.parent.on('dataProcessAsync', this.dataProcessAsync, this);\r\n        this.parent.on('setCurrentViewDataAsync', this.setCurrentViewDataAsync, this);\r\n        this.parent.on('bindScrollEvent', this.bindScrollEvent, this);\r\n    };\r\n    VirtualScroll.prototype.removeEventListener = function () {\r\n        if (this.parent.isDestroyed) {\r\n            return;\r\n        }\r\n        this.parent.off('observe', this.observe);\r\n        this.parent.off('setGeneratedData', this.setGeneratedData);\r\n        this.parent.off('dataProcessAsync', this.dataProcessAsync);\r\n        this.parent.off('setCurrentViewDataAsync', this.setCurrentViewDataAsync);\r\n        this.parent.off('bindScrollEvent', this.bindScrollEvent);\r\n    };\r\n    VirtualScroll.prototype.bindScrollEvent = function (component) {\r\n        var _this = this;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.component = component.component;\r\n        this.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); });\r\n    };\r\n    VirtualScroll.prototype.observe = function (callback) {\r\n        this.containerElementRect = this.parent.popupContentElement.getBoundingClientRect();\r\n        EventHandler.add(this.parent.popupContentElement, 'wheel mousedown', this.popupScrollHandler, this);\r\n        this.touchModule = new Touch(this.parent.popupContentElement, {\r\n            scroll: this.popupScrollHandler.bind(this)\r\n        });\r\n        EventHandler.add(this.parent.popupContentElement, 'scroll', this.virtualScrollHandler(callback), this);\r\n    };\r\n    VirtualScroll.prototype.getModuleName = function () {\r\n        return 'VirtualScroll';\r\n    };\r\n    VirtualScroll.prototype.popupScrollHandler = function (e) {\r\n        this.parent.isMouseScrollAction = true;\r\n        this.parent.isPreventScrollAction = false;\r\n    };\r\n    VirtualScroll.prototype.getPageQuery = function (query, virtualStartIndex, virtualEndIndex) {\r\n        if (virtualEndIndex !== 0 && !this.parent.allowFiltering && this.component !== 'autocomplete') {\r\n            query = query.skip(virtualStartIndex);\r\n        }\r\n        return query;\r\n    };\r\n    VirtualScroll.prototype.setGeneratedData = function (qStartIndex, recentlyGeneratedData) {\r\n        var loopIteration = 0;\r\n        var endIndex = this.parent.listData.length + this.parent.virtualItemStartIndex;\r\n        for (var i = this.parent.virtualItemStartIndex; i < endIndex; i++) {\r\n            var alreadyAddedData = this.parent.generatedDataObject[i];\r\n            if (!alreadyAddedData) {\r\n                if (recentlyGeneratedData !== null && this.parent.listData.slice(loopIteration, loopIteration + 1).length > 0) {\r\n                    var slicedData = this.parent.listData.slice(loopIteration, loopIteration + 1);\r\n                    if (slicedData.length > 0) {\r\n                        // Safely assign slicedData to this.parent.generatedDataObject[i]\r\n                        this.parent.generatedDataObject[i] = slicedData;\r\n                    }\r\n                }\r\n            }\r\n            loopIteration++;\r\n        }\r\n    };\r\n    VirtualScroll.prototype.generateAndExecuteQueryAsync = function (query, virtualItemStartIndex, virtualItemEndIndex, isQueryGenerated) {\r\n        if (virtualItemStartIndex === void 0) { virtualItemStartIndex = 0; }\r\n        if (virtualItemEndIndex === void 0) { virtualItemEndIndex = 0; }\r\n        if (isQueryGenerated === void 0) { isQueryGenerated = false; }\r\n        var dataSource = this.parent.dataSource;\r\n        if (!isQueryGenerated) {\r\n            query = this.getPageQuery(query, virtualItemStartIndex, virtualItemEndIndex);\r\n        }\r\n        this.parent.resetList(dataSource, this.parent.fields, query);\r\n    };\r\n    VirtualScroll.prototype.setCurrentViewDataAsync = function () {\r\n        // eslint-disable-next-line\r\n        var currentData = [];\r\n        for (var i = this.parent.viewPortInfo.startIndex; i < this.parent.viewPortInfo.endIndex; i++) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            var alreadyAddedData = this.parent.generatedDataObject[i];\r\n            if (alreadyAddedData) {\r\n                currentData.push(alreadyAddedData[0]);\r\n            }\r\n        }\r\n        this.parent.renderItems(currentData, this.parent.fields);\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        var virtualTrackElement = this.parent.list.getElementsByClassName('e-virtual-ddl')[0];\r\n        if (virtualTrackElement) {\r\n            (virtualTrackElement).style = this.parent.GetVirtualTrackHeight();\r\n        }\r\n        this.parent.UpdateSkeleton();\r\n        this.parent.liCollections = this.parent.list.querySelectorAll('.e-list-item');\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        var virtualContentElement = this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0];\r\n        if (virtualContentElement) {\r\n            (virtualContentElement).style = this.parent.getTransformValues();\r\n        }\r\n    };\r\n    VirtualScroll.prototype.generateQueryAndSetQueryIndexAsync = function (query, isPopupOpen) {\r\n        var isStartIndexInitialised = false;\r\n        var queryStartIndex = 0;\r\n        var queryEndIndex = 0;\r\n        var sortedDataStartIndex = 0;\r\n        var vEndIndex = this.parent && this.parent.viewPortInfo.endIndex !== 0 ? this.parent.viewPortInfo.endIndex : sortedDataStartIndex + this.parent.getItems().length;\r\n        if (!isPopupOpen && vEndIndex !== 0) {\r\n            for (var i = this.parent.viewPortInfo.startIndex; i <= vEndIndex; i++) {\r\n                if (!(i in this.parent.generatedDataObject)) {\r\n                    if (!isStartIndexInitialised) {\r\n                        isStartIndexInitialised = true;\r\n                        queryStartIndex = queryEndIndex = i;\r\n                    }\r\n                    else {\r\n                        queryEndIndex = i === vEndIndex ? i : i + 1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (isStartIndexInitialised && !((this.parent.totalItemCount == queryStartIndex) && (this.parent.totalItemCount == queryEndIndex))) {\r\n            this.parent.virtualItemStartIndex = queryStartIndex;\r\n            this.parent.virtualItemEndIndex = queryEndIndex;\r\n            this.generateAndExecuteQueryAsync(query, queryStartIndex, queryEndIndex);\r\n        }\r\n        this.setCurrentViewDataAsync();\r\n    };\r\n    VirtualScroll.prototype.dataProcessAsync = function (isOpenPopup) {\r\n        this.parent.selectedValueInfo = null;\r\n        this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\r\n        this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\r\n        this.generateQueryAndSetQueryIndexAsync(new Query(), isOpenPopup);\r\n    };\r\n    VirtualScroll.prototype.virtualScrollRefreshAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.parent.isCustomFilter = (!(this.parent.isTyped || (this.component === 'combobox' && this.parent.allowFiltering && this.parent.queryString != this.parent.typedString) || (!isNullOrUndefined(this.parent.filterInput) && !isNullOrUndefined(this.parent.filterInput.value) && this.parent.filterInput.value !== '') && this.component !== 'combobox') && !(this.component === 'autocomplete' && this.parent.value != null)) || this.parent.isCustomFilter;\r\n                        if (this.parent.allowFiltering || this.component === 'autocomplete') {\r\n                            if (!isNullOrUndefined(this.parent.typedString) && !(this.component === 'combobox' && !isNullOrUndefined(this.parent.typedString) && this.parent.allowFiltering)) {\r\n                                if (this.parent.viewPortInfo.endIndex >= this.parent.dataCount) {\r\n                                    this.parent.viewPortInfo.endIndex = this.parent.dataCount;\r\n                                }\r\n                                if (this.parent.viewPortInfo.startIndex >= this.parent.dataCount) {\r\n                                    this.parent.viewPortInfo.startIndex = this.parent.dataCount - this.parent.itemCount;\r\n                                }\r\n                            }\r\n                            else {\r\n                                this.parent.getSkeletonCount(true);\r\n                            }\r\n                        }\r\n                        return [4 /*yield*/, this.dataProcessAsync()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        if (this.parent.keyboardEvent != null) {\r\n                            this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent, this.parent.pageCount);\r\n                        }\r\n                        this.parent.isCustomFilter = false;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    VirtualScroll.prototype.scrollListener = function (scrollArgs) {\r\n        var _this = this;\r\n        if (!this.parent.isPreventScrollAction) {\r\n            var info = scrollArgs.sentinel;\r\n            var pStartIndex = this.parent.previousStartIndex;\r\n            this.parent.viewPortInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset, false);\r\n            this.parent.isUpwardScrolling = false;\r\n            if (this.parent.previousStartIndex !== pStartIndex && !this.parent.isKeyBoardAction) {\r\n                this.parent.isScrollActionTriggered = false;\r\n                this.parent.currentPageNumber = this.parent.viewPortInfo.currentPageNumber;\r\n                this.parent.virtualListInfo = __assign({}, this.parent.viewPortInfo);\r\n                this.parent.isPreventKeyAction = true;\r\n                this.parent.isVirtualScrolling = true;\r\n                setTimeout(function () {\r\n                    _this.parent.pageCount = _this.parent.getPageCount();\r\n                    _this.virtualScrollRefreshAsync().then(function () {\r\n                        if (_this.parent.popupObj) {\r\n                            _this.parent.list = _this.parent.popupObj.element.querySelector('.' + 'e-content') || select('.' + 'e-content');\r\n                            _this.parent.updateSelectionList();\r\n                            _this.parent.liCollections = _this.parent.getItems();\r\n                        }\r\n                        _this.parent.isKeyBoardAction = false;\r\n                        _this.parent.isVirtualScrolling = false;\r\n                        _this.parent.isPreventKeyAction = false;\r\n                    });\r\n                }, 5);\r\n            }\r\n            else if (this.parent.isScrollActionTriggered) {\r\n                this.parent.isPreventKeyAction = false;\r\n                this.parent.isScrollActionTriggered = false;\r\n                var virtualListCount = this.parent.list.querySelectorAll('.e-virtual-list').length;\r\n                var listElement = this.parent.list.querySelector('.' + 'e-list-item');\r\n                var translateY = scrollArgs.offset.top - (listElement.offsetHeight * virtualListCount);\r\n                this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0].style.transform = \"translate(0px,\" + translateY + \"px)\";\r\n            }\r\n            this.parent.previousInfo = this.parent.viewPortInfo;\r\n        }\r\n    };\r\n    VirtualScroll.prototype.getPageCount = function (popupElement, returnExactCount) {\r\n        if (returnExactCount === void 0) { returnExactCount = false; }\r\n        var list = popupElement && popupElement.querySelector('.e-content');\r\n        if (list) {\r\n            var liHeight = list.classList.contains('e-nodata') ? null : getComputedStyle(list.querySelectorAll('.e-list-item')[0], null).getPropertyValue('height');\r\n            var pageCount = list.getBoundingClientRect().height / parseInt(liHeight, 10);\r\n            return returnExactCount ? pageCount : Math.round(pageCount);\r\n        }\r\n        return 0;\r\n    };\r\n    ;\r\n    VirtualScroll.prototype.getRowHeight = function () {\r\n        return (isNullOrUndefined(this.parent.liCollections) || this.parent.liCollections.length == 0) ? 0 : Math.ceil(this.parent.liCollections[0].getBoundingClientRect().height);\r\n    };\r\n    VirtualScroll.prototype.getInfoFromView = function (direction, info, e, isscrollAction) {\r\n        var infoType = {\r\n            direction: direction, sentinelInfo: info, offsets: e,\r\n            startIndex: this.parent.previousStartIndex, endIndex: this.parent.previousEndIndex\r\n        };\r\n        var vHeight = this.parent.popupContentElement.getBoundingClientRect().height;\r\n        //Row Start and End Index calculation\r\n        var rowHeight = this.parent.listItemHeight;\r\n        var exactTopIndex = e.top / rowHeight;\r\n        var infoViewIndices = vHeight / rowHeight;\r\n        var exactEndIndex = exactTopIndex + infoViewIndices;\r\n        var pageSizeBy4 = this.parent.virtualItemCount / 4;\r\n        var totalItemCount = this.parent.totalItemCount;\r\n        if (infoType.direction === 'down') {\r\n            var sIndex = Math.round(exactEndIndex) - Math.round((pageSizeBy4));\r\n            if (isNullOrUndefined(infoType.startIndex) || (exactEndIndex >\r\n                (infoType.startIndex + Math.round((this.parent.virtualItemCount / 2 + pageSizeBy4)))\r\n                && infoType.endIndex !== totalItemCount)) {\r\n                infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\r\n                infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\r\n                var eIndex = infoType.startIndex + this.parent.virtualItemCount;\r\n                infoType.startIndex = eIndex < exactEndIndex ? (Math.ceil(exactEndIndex) - this.parent.virtualItemCount)\r\n                    : infoType.startIndex;\r\n                infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\r\n                infoType.startIndex = eIndex >= totalItemCount ? (infoType.endIndex - this.parent.virtualItemCount > 0 ? infoType.endIndex - this.parent.virtualItemCount : 0) : infoType.startIndex;\r\n                infoType.currentPageNumber = Math.ceil(infoType.endIndex / this.parent.virtualItemCount);\r\n            }\r\n        }\r\n        else if (infoType.direction === 'up') {\r\n            if (infoType.startIndex && infoType.endIndex) {\r\n                var loadAtIndex = Math.round(((infoType.startIndex * rowHeight) + (pageSizeBy4 * rowHeight)) / rowHeight);\r\n                if (exactTopIndex < loadAtIndex) {\r\n                    var idxAddedToExactTop = (pageSizeBy4) > infoViewIndices ? pageSizeBy4 :\r\n                        (infoViewIndices + infoViewIndices / 4);\r\n                    var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\r\n                    infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\r\n                    var sIndex = infoType.endIndex - this.parent.virtualItemCount;\r\n                    infoType.startIndex = sIndex > 0 ? sIndex : 0;\r\n                    infoType.endIndex = sIndex < 0 ? this.parent.virtualItemCount : infoType.endIndex;\r\n                    infoType.currentPageNumber = Math.ceil(infoType.startIndex / this.parent.virtualItemCount);\r\n                }\r\n            }\r\n        }\r\n        if (!isscrollAction) {\r\n            this.parent.previousStartIndex = infoType.startIndex;\r\n            this.parent.startIndex = infoType.startIndex;\r\n            this.parent.previousEndIndex = infoType.endIndex;\r\n        }\r\n        else {\r\n            this.parent.scrollPreStartIndex = infoType.startIndex;\r\n        }\r\n        return infoType;\r\n    };\r\n    VirtualScroll.prototype.virtualScrollHandler = function (callback) {\r\n        var _this = this;\r\n        var delay = Browser.info.name === 'chrome' ? 200 : 100;\r\n        var prevTop = 0;\r\n        var debounced100 = debounce(callback, delay);\r\n        var debounced50 = debounce(callback, 50);\r\n        return function (e) {\r\n            var top = e.target.scrollTop;\r\n            var left = e.target.scrollLeft;\r\n            var direction = prevTop < top && !_this.parent.isUpwardScrolling ? 'down' : 'up';\r\n            prevTop = top;\r\n            var current = _this.sentinelInfo[direction];\r\n            var pstartIndex = _this.parent.scrollPreStartIndex;\r\n            var scrollOffsetargs = {\r\n                top: top,\r\n                left: left\r\n            };\r\n            if (_this.parent.list.querySelectorAll('.e-virtual-list').length > 0) {\r\n                var infoview = _this.getInfoFromView(direction, current, scrollOffsetargs, true);\r\n                if (_this.parent.scrollPreStartIndex != pstartIndex && !_this.parent.isPreventScrollAction) {\r\n                    _this.parent.isScrollActionTriggered = true;\r\n                    var virtualPoup = (_this.parent.list.querySelector('.e-virtual-ddl-content'));\r\n                    virtualPoup.style.transform = \"translate(0px,\" + top + \"px)\";\r\n                }\r\n            }\r\n            var debounceFunction = debounced100;\r\n            if (current.axis === 'X') {\r\n                debounceFunction = debounced50;\r\n            }\r\n            debounceFunction({ direction: direction, sentinel: current, offset: { top: top, left: left },\r\n                focusElement: document.activeElement });\r\n        };\r\n    };\r\n    VirtualScroll.prototype.destroy = function () {\r\n        this.removeEventListener();\r\n    };\r\n    return VirtualScroll;\r\n}());\r\nexport { VirtualScroll };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}